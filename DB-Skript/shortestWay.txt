CREATE TABLE MapImage(
	Id int(7) unsigned NOT NULL auto_increment PRIMARY KEY,
	ImgData longblob NOT NULL DEFAULT '',
	ImgType varchar(50) UNIQUE NOT NULL DEFAULT '',
	created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated timestamp NOT NULL DEFAULT '0000-00-00'
)
ENGINE = INNODB;


CREATE TABLE ClassCategory(
	Id int(2) unsigned NOT NULL auto_increment PRIMARY KEY,
	Class varchar(25) NULL DEFAULT '',	
	Description text NOT NULL,	
	created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated timestamp NOT NULL DEFAULT '0000-00-00'
)
ENGINE = INNODB;

INSERT INTO ClassCategory
	(Id,Class,Description) 
VALUES 
	(1,'Hauptstrasse','Strassen 1. Klasse sind meistens blau signalisierte Hauptstrassen. Sie sind mindestens 6 Meter breit, so dass zwei Lastwagen sich ungehindert kreuzen können, und für den gemischten Verkehr (Velos, Traktoren) gestattet. Sie bestehen aus einem Hartbelag und Steigungen sind nicht höher als 10%. Diese Strassen haben oft einen Velostreifen und Trottoir. Sie dienen vorwiegend dem Durchgangsverkehr.'),
	(2,'Hauptstrasse','Strassen 2. Klasse sind meistens weiss signalisierte Nebenstrassen. Sie sind mindestens 4 Meter breit, so dass zwei Autos sich ungehindert kreuzen können. Sie bestehen aus einem Hartbelag und Steigungen sind nicht höher als 15%. Sie sind Ortsverbindungsstrassen oder wichtige Strassen innerorts. Zur Erhöhung der Sicherheit solcher Strassen können sie als Kernfahrbahn gestaltet werden.'),
	(3,'Strasse','Strassen 3. Klasse sind mindestens 2,80 Meter breit. Sie haben nicht zwingend einen Hartbelag. Gewöhnlich sind sie mit Lastwagen befahrbar, gekreuzt wird an Ausweichstellen. Diese Strassen dienen der Erschliessung von Siedlungen oder wichtigen Einzelgebäuden sowie der Land- und Forstwirtschaft.'),
	(4,'Fahrweg','Fahrwege 4. Klasse sind mindestens 1,80 Meter breit. Diese Naturstrassen können in der Mitte Gras haben. Bei normalen Verhältnissen sind sie mit Personenwagen befahrbar. Sie können mit einem Fahrverbot hinterlegt sein.'),
	(5,'Feldweg','Wege der 5. Klasse sind Feld- und Waldwege ohne ausreichenden Unterbau und oft nur mit Geländefahrzeugen oder Traktoren befahrbar. Velowege wiederum können mit Hartbelag ausgestattet sein. Sie führen oft parallel zu höherklassierten Strassen, sind aber getrennt angelegt.'),
	(6,'Fussweg','Wege der 6. Klasse sind Fussgängern vorbehalten. Es kann sich dabei von Bergpfaden bis zu breiten Spazierwegen handeln. Sie sind oft Teil von Wanderwegen (gelb, weiss-rot-weiss oder weiss-blau-weiss markiert).'),
	(7,'Autobahn','Eine kreuzungsfreie Strasse für den Schnellverkehr mit Mittelstreifen, auf denen der Langsamverkehr nicht gestattet ist. Es ist mit dem grünen Autobahnsymbol gekennzeichnet.'),
	(8,'Autostrasse','Eine kreuzungsfreie Strasse für den Schnellverkehr mit zwei oder mehr Fahrbahnen ohne Mittelstreifen, auf denen der Langsamverkehr nicht gestattet ist. Es ist mit dem grünen Autostrassensymbol gekennzeichnet.'),
	(9,'Quartierstrasse','Quartierstrassen sind ebenfalls mindestens 4 Meter breit und immer mit Hartbelag. Sie können verkehrsberuhigt sein und sind ohne Bedeutung für den Durchgangsverkehr. Ausserorts dienen Strassen dieser Klasse der Zufahrt zu wichtigen Anlagen oder Objekten.');


CREATE TABLE DistanceUnit(
	Id int(2) unsigned NOT NULL auto_increment PRIMARY KEY,
	Unit varchar(50) NULL DEFAULT 'neue Einheit',
	created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated timestamp NOT NULL DEFAULT '0000-00-00'
)
ENGINE = INNODB;

INSERT INTO DistanceUnit
	(Id,Unit) 
VALUES 
	(1,'cm'),
	(2,'m'),
	(3,'km');



CREATE TABLE Way(
	Id int(2) unsigned NOT NULL auto_increment PRIMARY KEY,
	StartPointX int(7) NOT NULL DEFAULT '0',
	StartPointY int(7) NOT NULL DEFAULT '0',
	StartPointName varchar(50) NULL DEFAULT '',
	EndPointX int(7) NOT NULL DEFAULT '0',
	EndPointY int(7) NOT NULL DEFAULT '0',
	EndPointName varchar(50) NULL DEFAULT '',
	Distance int(7) NOT NULL DEFAULT '0',
	DistanceUnitId int(2) unsigned NOT NULL DEFAULT '1',
	FOREIGN KEY (DistanceUnitId) REFERENCES DistanceUnit(Id),
	ClassCategoryId int(2) unsigned NOT NULL DEFAULT '1',
	FOREIGN KEY (ClassCategoryId) REFERENCES ClassCategory(Id),	
	Toll boolean NOT NULL DEFAULT '0',
	created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated timestamp NOT NULL DEFAULT '0000-00-00'
)
ENGINE = INNODB;


CREATE TABLE RoutingMap(
	Id int(2) unsigned NOT NULL auto_increment PRIMARY KEY,
	MapImageId int(2) unsigned NOT NULL DEFAULT '1',
	FOREIGN KEY (MapImageId) REFERENCES MapImage(Id),
	WayId int(2) unsigned NOT NULL DEFAULT '1',
	FOREIGN KEY (WayId) REFERENCES Way(Id),	
	Description varchar(50) NOT NULL DEFAULT 'Neuer Eintrag',
	created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated timestamp NOT NULL DEFAULT '0000-00-00'
)
ENGINE = INNODB;



/* Testdaten abfüllen */


INSERT INTO MapImage
	(Id,ImgData,ImgType)
VALUES 
	(1,1,'jpg');


INSERT INTO Way
	(Id,StartPointX,StartPointY,StartPointName,EndPointX,EndPointY,EndPointName,Distance,DistanceUnitId,ClassCategoryId,Toll) 
VALUES 
	(1,2,3,'Startpunkt 2/3',4,500,'Endpunkt 4/500',10,3,4,0);

INSERT INTO RoutingMap
	(Id,MapImageId,WayId,Description)
VALUES 
	(1,1,1,'Testfall 1');
